---
layout: page
title: 晨曦的博客
description: "点点滴滴"
header-img: "/img/home-bg.jpg"
---

{% for post in paginator.posts %}
<div class="post-preview">
    <a href="{{ post.url | prepend: site.baseurl }}">
        <h2 class="post-title">
            {{ post.title }}
        </h2>
        {% if post.subtitle %}
        <h3 class="post-subtitle">
            {{ post.subtitle }}
        </h3>
        {% endif %}
		{% if post.description %}
        <div class="post-content-preview">
            {% if post.description %}
			{{ post.description }}
			{% endif %}
        </div>
		{% endif %}
    </a>
    <p class="post-meta">
        Posted on {{ post.date | date: "%B %-d, %Y" }};&nbsp;浏览量:&nbsp;<span id="{{ post.title }}" class="leancloud_visitors" data-flag-title="{{ post.title }}"> - </span>次.&nbsp;字数:&nbsp;{{ post.content | number_of_words }}
    </p>
</div>
<hr>
{% endfor %}
<script src="//cdn1.lncld.net/static/js/2.5.0/av-min.js"></script>
<script>
    var APP_ID = 'JOlpycoXPlWpliHaQCATuSMI-gzGzoHsz';
    var APP_KEY = 'aOrAECRcUnwpNiY8RtEoxMzX';
    AV.init({
        appId: APP_ID,
        appKey: APP_KEY
    });
    // 显示次数
    function showTime(Counter) {
        var query = new AV.Query("Counter");
        if($(".leancloud_visitors").length > 0){
            var url = $(".leancloud_visitors").attr('id').trim();
            // where field
            query.equalTo("words", url);
            // count
            query.count().then(function (number) {
                // There are number instances of MyClass where words equals url.
                $(document.getElementById(url)).text(number?  number : '--');
            }, function (error) {
                // error is an instance of AVError.
            });
        }
    }
    // 追加pv
    function addCount(Counter) {
        var url = $(".leancloud_visitors").length > 0 ? $(".leancloud_visitors").attr('id').trim() : 'icafebolger.com';
        var Counter = AV.Object.extend("Counter");
        var query = new Counter;
        query.save({
            words: url
        }).then(function (object) {
        })
    }
    $(function () {
        var Counter = AV.Object.extend("Counter");
        addCount(Counter);
        showTime(Counter);
    });
</script>

<!-- Pager -->
<ul class="pager">

  {% if paginator.previous_page %}
  <li class="home previous">
    {% if paginator.previous_page == 1 %}
    <a href="{{ site.BASE_PATH }}/">&larr; 上一页</a>
    {% else %}
    <a href="{{ site.BASE_PATH }}/{{ site.paginate_path | replace: ':num', paginator.previous_page }}">&larr; 上一页</a>
    {% endif %}
  </li>
  {% else %}
  <li class="home previous disabled">
    <a>&larr; 上一页</a>
  </li>
  {% endif %}

  <li>
    <span class="page_number">Page: {{ paginator.page }} of {{ paginator.total_pages }}</span>
  </li>

  {% if paginator.next_page %}
  <li class="home next">
    <a href="{{ site.BASE_PATH }}/{{ site.paginate_path | replace: ':num', paginator.next_page }}">下一页 &rarr;</a>
  </li>
  {% else %}
  <li class="home next disabled">
    <a>下一页 &rarr;</a>
  </li>
  {% endif %}

</ul>
